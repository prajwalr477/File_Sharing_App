{"ast":null,"code":"var _jsxFileName = \"F:\\\\projects\\\\File-Share2\\\\client\\\\src\\\\components\\\\Header.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { socket } from '../socket'; // Import the socket\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Header() {\n  _s();\n  const [messages, setMessages] = useState([]); // To store connection requests\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false); // To toggle the dropdown visibility\n\n  // Listen for incoming connection requests (when another user tries to connect)\n  useEffect(() => {\n    socket.on('connection-request', request => {\n      setMessages(prevMessages => [...prevMessages, request]);\n    });\n\n    // Cleanup socket listener on component unmount\n    return () => {\n      socket.off('connection-request');\n    };\n  }, []);\n\n  // Handle Accept or Decline button click\n  const handleRequestResponse = (username, response) => {\n    // Emit the response back to the server (Accept or Decline)\n    socket.emit('respond-to-connection', {\n      username,\n      response\n    });\n\n    // Remove the message from the list after responding\n    setMessages(prevMessages => prevMessages.filter(message => message.username !== username));\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Accio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/file-share\",\n            children: \"FileShare\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#about\",\n            children: \"About\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#services\",\n            children: \"Services\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#contact\",\n            children: \"Contact\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"messages\",\n          onClick: () => setIsDropdownOpen(!isDropdownOpen),\n          children: [\"Messages (\", messages.length, \") \", isDropdownOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown\",\n            children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No connection requests\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 19\n            }, this) : messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [message.username, \" wants to connect\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleRequestResponse(message.username, 'accept'),\n                children: \"Accept\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleRequestResponse(message.username, 'decline'),\n                children: \"Decline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 23\n              }, this)]\n            }, message.username, true, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"/1CstSq73BCY7+S276e5FLj5Q0E=\");\n_c = Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","Link","socket","jsxDEV","_jsxDEV","Header","_s","messages","setMessages","isDropdownOpen","setIsDropdownOpen","on","request","prevMessages","off","handleRequestResponse","username","response","emit","filter","message","children","fileName","_jsxFileName","lineNumber","columnNumber","to","className","onClick","length","map","_c","$RefreshReg$"],"sources":["F:/projects/File-Share2/client/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { socket } from '../socket';  // Import the socket\r\n\r\nexport default function Header() {\r\n  const [messages, setMessages] = useState([]);  // To store connection requests\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);  // To toggle the dropdown visibility\r\n\r\n  // Listen for incoming connection requests (when another user tries to connect)\r\n  useEffect(() => {\r\n    socket.on('connection-request', (request) => {\r\n      setMessages((prevMessages) => [...prevMessages, request]);\r\n    });\r\n\r\n    // Cleanup socket listener on component unmount\r\n    return () => {\r\n      socket.off('connection-request');\r\n    };\r\n  }, []);\r\n\r\n  // Handle Accept or Decline button click\r\n  const handleRequestResponse = (username, response) => {\r\n    // Emit the response back to the server (Accept or Decline)\r\n    socket.emit('respond-to-connection', { username, response });\r\n\r\n    // Remove the message from the list after responding\r\n    setMessages((prevMessages) =>\r\n      prevMessages.filter((message) => message.username !== username)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <header>\r\n      <h1>Accio</h1>\r\n      <nav>\r\n        <ul>\r\n          <li><Link to=\"/\">Home</Link></li>\r\n          <li><Link to=\"/file-share\">FileShare</Link></li>\r\n          <li><Link to=\"#about\">About</Link></li>\r\n          <li><Link to=\"#services\">Services</Link></li>\r\n          <li><Link to=\"#contact\">Contact</Link></li>\r\n          <li className=\"messages\" onClick={() => setIsDropdownOpen(!isDropdownOpen)}>\r\n            Messages ({messages.length}) {/* Show number of requests */}\r\n            {isDropdownOpen && (\r\n              <div className=\"dropdown\">\r\n                {messages.length === 0 ? (\r\n                  <p>No connection requests</p>\r\n                ) : (\r\n                  messages.map((message) => (\r\n                    <div key={message.username} className=\"dropdown-item\">\r\n                      <p>{message.username} wants to connect</p>\r\n                      <button onClick={() => handleRequestResponse(message.username, 'accept')}>Accept</button>\r\n                      <button onClick={() => handleRequestResponse(message.username, 'decline')}>Decline</button>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            )}\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,MAAM,QAAQ,WAAW,CAAC,CAAE;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErC,eAAe,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAC/B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAE;EAC/C,MAAM,CAACU,cAAc,EAAEC,iBAAiB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAE;;EAE9D;EACAC,SAAS,CAAC,MAAM;IACdE,MAAM,CAACS,EAAE,CAAC,oBAAoB,EAAGC,OAAO,IAAK;MAC3CJ,WAAW,CAAEK,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAED,OAAO,CAAC,CAAC;IAC3D,CAAC,CAAC;;IAEF;IACA,OAAO,MAAM;MACXV,MAAM,CAACY,GAAG,CAAC,oBAAoB,CAAC;IAClC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,qBAAqB,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;IACpD;IACAf,MAAM,CAACgB,IAAI,CAAC,uBAAuB,EAAE;MAAEF,QAAQ;MAAEC;IAAS,CAAC,CAAC;;IAE5D;IACAT,WAAW,CAAEK,YAAY,IACvBA,YAAY,CAACM,MAAM,CAAEC,OAAO,IAAKA,OAAO,CAACJ,QAAQ,KAAKA,QAAQ,CAChE,CAAC;EACH,CAAC;EAED,oBACEZ,OAAA;IAAAiB,QAAA,gBACEjB,OAAA;MAAAiB,QAAA,EAAI;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACdrB,OAAA;MAAAiB,QAAA,eACEjB,OAAA;QAAAiB,QAAA,gBACEjB,OAAA;UAAAiB,QAAA,eAAIjB,OAAA,CAACH,IAAI;YAACyB,EAAE,EAAC,GAAG;YAAAL,QAAA,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjCrB,OAAA;UAAAiB,QAAA,eAAIjB,OAAA,CAACH,IAAI;YAACyB,EAAE,EAAC,aAAa;YAAAL,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAChDrB,OAAA;UAAAiB,QAAA,eAAIjB,OAAA,CAACH,IAAI;YAACyB,EAAE,EAAC,QAAQ;YAAAL,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvCrB,OAAA;UAAAiB,QAAA,eAAIjB,OAAA,CAACH,IAAI;YAACyB,EAAE,EAAC,WAAW;YAAAL,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC7CrB,OAAA;UAAAiB,QAAA,eAAIjB,OAAA,CAACH,IAAI;YAACyB,EAAE,EAAC,UAAU;YAAAL,QAAA,EAAC;UAAO;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC3CrB,OAAA;UAAIuB,SAAS,EAAC,UAAU;UAACC,OAAO,EAAEA,CAAA,KAAMlB,iBAAiB,CAAC,CAACD,cAAc,CAAE;UAAAY,QAAA,GAAC,YAChE,EAACd,QAAQ,CAACsB,MAAM,EAAC,IAAE,EAC5BpB,cAAc,iBACbL,OAAA;YAAKuB,SAAS,EAAC,UAAU;YAAAN,QAAA,EACtBd,QAAQ,CAACsB,MAAM,KAAK,CAAC,gBACpBzB,OAAA;cAAAiB,QAAA,EAAG;YAAsB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,GAE7BlB,QAAQ,CAACuB,GAAG,CAAEV,OAAO,iBACnBhB,OAAA;cAA4BuB,SAAS,EAAC,eAAe;cAAAN,QAAA,gBACnDjB,OAAA;gBAAAiB,QAAA,GAAID,OAAO,CAACJ,QAAQ,EAAC,mBAAiB;cAAA;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAC1CrB,OAAA;gBAAQwB,OAAO,EAAEA,CAAA,KAAMb,qBAAqB,CAACK,OAAO,CAACJ,QAAQ,EAAE,QAAQ,CAAE;gBAAAK,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACzFrB,OAAA;gBAAQwB,OAAO,EAAEA,CAAA,KAAMb,qBAAqB,CAACK,OAAO,CAACJ,QAAQ,EAAE,SAAS,CAAE;gBAAAK,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA,GAHnFL,OAAO,CAACJ,QAAQ;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAIrB,CACN;UACF;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb;AAACnB,EAAA,CA3DuBD,MAAM;AAAA0B,EAAA,GAAN1B,MAAM;AAAA,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}